import cv2
import cv2 as cv
import mediapipe.python.solutions.hands as mp_hands
import mediapipe.python.solutions.drawing_utils as drawing
import mediapipe.python.solutions.drawing_styles as drawing_styles
import math
# import imutils

Phi = 0.5 * (-1.0 + math.sqrt(5.0))

# Templates

triangle_points = {'name': 'triangle', 'points': [(137, 139), (135, 141), (133, 144), (132, 146), (130, 149), (128, 151), (126, 155), (123, 160), (120, 166), (116, 171), (112, 177), (107, 183), (102, 188), (100, 191), (95, 195), (90, 199), (86, 203), (82, 206), (80, 209), (75, 213), (73, 213), (70, 216), (67, 219), (64, 221), (61, 223), (60, 225), (62, 226), (65, 225), (67, 226), (74, 226), (77, 227), (85, 229), (91, 230), (99, 231), (108, 232), (116, 233), (125, 233), (134, 234), (145, 233), (153, 232), (160, 233), (170, 234), (177, 235), (179, 236), (186, 237), (193, 238), (198, 239), (200, 237), (202, 239), (204, 238), (206, 234), (205, 230), (202, 222), (197, 216), (192, 207), (186, 198), (179, 189), (174, 183), (170, 178), (164, 171), (161, 168), (154, 160), (148, 155), (143, 150), (138, 148), (136, 148)]}
x_points = {'name': 'x', 'points': [(87, 142), (89, 145), (91, 148), (93, 151), (96, 155), (98, 157), (100, 160), (102, 162), (106, 167), (108, 169), (110, 171), (115, 177), (119, 183), (123, 189), (127, 193), (129, 196), (133, 200), (137, 206), (140, 209), (143, 212), (146, 215), (151, 220), (153, 222), (155, 223), (157, 225), (158, 223), (157, 218), (155, 211), (154, 208), (152, 200), (150, 189), (148, 179), (147, 170), (147, 158), (147, 148), (147, 141), (147, 136), (144, 135), (142, 137), (140, 139), (135, 145), (131, 152), (124, 163), (116, 177), (108, 191), (100, 206), (94, 217), (91, 222), (89, 225), (87, 226), (87, 224)]}
rectangle_points = {'name': 'rectangle', 'points': [(78, 149), (78, 153), (78, 157), (78, 160), (79, 162), (79, 164), (79, 167), (79, 169), (79, 173), (79, 178), (79, 183), (80, 189), (80, 193), (80, 198), (80, 202), (81, 208), (81, 210), (81, 216), (82, 222), (82, 224), (82, 227), (83, 229), (83, 231), (85, 230), (88, 232), (90, 233), (92, 232), (94, 233), (99, 232), (102, 233), (106, 233), (109, 234), (117, 235), (123, 236), (126, 236), (135, 237), (142, 238), (145, 238), (152, 238), (154, 239), (165, 238), (174, 237), (179, 236), (186, 235), (191, 235), (195, 233), (197, 233), (200, 233), (201, 235), (201, 233), (199, 231), (198, 226), (198, 220), (196, 207), (195, 195), (195, 181), (195, 173), (195, 163), (194, 155), (192, 145), (192, 143), (192, 138), (191, 135), (191, 133), (191, 130), (190, 128), (188, 129), (186, 129), (181, 132), (173, 131), (162, 131), (151, 132), (149, 132), (138, 132), (136, 132), (122, 131), (120, 131), (109, 130), (107, 130), (90, 132), (81, 133), (76, 133)]}
circle_points = {'name': 'circle', 'points': [(127, 141), (124, 140), (120, 139), (118, 139), (116, 139), (111, 140), (109, 141), (104, 144), (100, 147), (96, 152), (93, 157), (90, 163), (87, 169), (85, 175), (83, 181), (82, 190), (82, 195), (83, 200), (84, 205), (88, 213), (91, 216), (96, 219), (103, 222), (108, 224), (111, 224), (120, 224), (133, 223), (142, 222), (152, 218), (160, 214), (167, 210), (173, 204), (178, 198), (179, 196), (182, 188), (182, 177), (178, 167), (170, 150), (163, 138), (152, 130), (143, 129), (140, 131), (129, 136), (126, 139)]}
check_points = {'name': 'check', 'points': [(91, 185), (93, 185), (95, 185), (97, 185), (100, 188), (102, 189), (104, 190), (106, 193), (108, 195), (110, 198), (112, 201), (114, 204), (115, 207), (117, 210), (118, 212), (120, 214), (121, 217), (122, 219), (123, 222), (124, 224), (126, 226), (127, 229), (129, 231), (130, 233), (129, 231), (129, 228), (129, 226), (129, 224), (129, 221), (129, 218), (129, 212), (129, 208), (130, 198), (132, 189), (134, 182), (137, 173), (143, 164), (147, 157), (151, 151), (155, 144), (161, 137), (165, 131), (171, 122), (174, 118), (176, 114), (177, 112), (177, 114), (175, 116), (173, 118)]}
caret_points = {'name': 'caret', 'points': [(79, 245), (79, 242), (79, 239), (80, 237), (80, 234), (81, 232), (82, 230), (84, 224), (86, 220), (86, 218), (87, 216), (88, 213), (90, 207), (91, 202), (92, 200), (93, 194), (94, 192), (96, 189), (97, 186), (100, 179), (102, 173), (105, 165), (107, 160), (109, 158), (112, 151), (115, 144), (117, 139), (119, 136), (119, 134), (120, 132), (121, 129), (122, 127), (124, 125), (126, 124), (129, 125), (131, 127), (132, 130), (136, 139), (141, 154), (145, 166), (151, 182), (156, 193), (157, 196), (161, 209), (162, 211), (167, 223), (169, 229), (170, 231), (173, 237), (176, 242), (177, 244), (179, 250), (181, 255), (182, 257)]}
arrow_points = {'name': 'arrow', 'points': [(68, 222), (70, 220), (73, 218), (75, 217), (77, 215), (80, 213), (82, 212), (84, 210), (87, 209), (89, 208), (92, 206), (95, 204), (101, 201), (106, 198), (112, 194), (118, 191), (124, 187), (127, 186), (132, 183), (138, 181), (141, 180), (146, 178), (154, 173), (159, 171), (161, 170), (166, 167), (168, 167), (171, 166), (174, 164), (177, 162), (180, 160), (182, 158), (183, 156), (181, 154), (178, 153), (171, 153), (164, 153), (160, 153), (150, 154), (147, 155), (141, 157), (137, 158), (135, 158), (137, 158), (140, 157), (143, 156), (151, 154), (160, 152), (170, 149), (179, 147), (185, 145), (192, 144), (196, 144), (198, 144), (200, 144), (201, 147), (199, 149), (194, 157), (191, 160), (186, 167), (180, 176), (177, 179), (171, 187), (169, 189), (165, 194), (164, 196)]}
left_square_bracket_points = {'name': 'left square bracket', 'points': [(140, 124), (138, 123), (135, 122), (133, 123), (130, 123), (128, 124), (125, 125), (122, 124), (120, 124), (118, 124), (116, 125), (113, 125), (111, 125), (108, 124), (106, 125), (104, 125), (102, 124), (100, 123), (98, 123), (95, 124), (93, 123), (90, 124), (88, 124), (85, 125), (83, 126), (81, 127), (81, 129), (82, 131), (82, 134), (83, 138), (84, 141), (84, 144), (85, 148), (85, 151), (86, 156), (86, 160), (86, 164), (86, 168), (87, 171), (87, 175), (87, 179), (87, 182), (87, 186), (88, 188), (88, 195), (88, 198), (88, 201), (88, 207), (89, 211), (89, 213), (89, 217), (89, 222), (88, 225), (88, 229), (88, 231), (88, 233), (88, 235), (89, 237), (89, 240), (89, 242), (91, 241), (94, 241), (96, 240), (98, 239), (105, 240), (109, 240), (113, 239), (116, 240), (121, 239), (130, 240), (136, 237), (139, 237), (144, 238), (151, 237), (157, 236), (159, 237)]}
right_square_bracket_points = {'name': 'right square bracket', 'points': [(112, 138), (112, 136), (115, 136), (118, 137), (120, 136), (123, 136), (125, 136), (128, 136), (131, 136), (134, 135), (137, 135), (140, 134), (143, 133), (145, 132), (147, 132), (149, 132), (152, 132), (153, 134), (154, 137), (155, 141), (156, 144), (157, 152), (158, 161), (160, 170), (162, 182), (164, 192), (166, 200), (167, 209), (168, 214), (168, 216), (169, 221), (169, 223), (169, 228), (169, 231), (166, 233), (164, 234), (161, 235), (155, 236), (147, 235), (140, 233), (131, 233), (124, 233), (117, 235), (114, 238), (112, 238)]}
v_points = {'name': 'v', 'points': [(89, 164), (90, 162), (92, 162), (94, 164), (95, 166), (96, 169), (97, 171), (99, 175), (101, 178), (103, 182), (106, 189), (108, 194), (111, 199), (114, 204), (117, 209), (119, 214), (122, 218), (124, 222), (126, 225), (128, 228), (130, 229), (133, 233), (134, 236), (136, 239), (138, 240), (139, 242), (140, 244), (142, 242), (142, 240), (142, 237), (143, 235), (143, 233), (145, 229), (146, 226), (148, 217), (149, 208), (149, 205), (151, 196), (151, 193), (153, 182), (155, 172), (157, 165), (159, 160), (162, 155), (164, 150), (165, 148), (166, 146)]}
delete_points = {'name': 'delete', 'points': [(123, 129), (123, 131), (124, 133), (125, 136), (127, 140), (129, 142), (133, 148), (137, 154), (143, 158), (145, 161), (148, 164), (153, 170), (158, 176), (160, 178), (164, 183), (168, 188), (171, 191), (175, 196), (178, 200), (180, 202), (181, 205), (184, 208), (186, 210), (187, 213), (188, 215), (186, 212), (183, 211), (177, 208), (169, 206), (162, 205), (154, 207), (145, 209), (137, 210), (129, 214), (122, 217), (118, 218), (111, 221), (109, 222), (110, 219), (112, 217), (118, 209), (120, 207), (128, 196), (135, 187), (138, 183), (148, 167), (157, 153), (163, 145), (165, 142), (172, 133), (177, 127), (179, 127), (180, 125)]}
left_curly_brace_points = {'name': 'left curly brace', 'points': [(150, 116), (147, 117), (145, 116), (142, 116), (139, 117), (136, 117), (133, 118), (129, 121), (126, 122), (123, 123), (120, 125), (118, 127), (115, 128), (113, 129), (112, 131), (113, 134), (115, 134), (117, 135), (120, 135), (123, 137), (126, 138), (129, 140), (135, 143), (137, 144), (139, 147), (141, 149), (140, 152), (139, 155), (134, 159), (131, 161), (124, 166), (121, 166), (117, 166), (114, 167), (112, 166), (114, 164), (116, 163), (118, 163), (120, 162), (122, 163), (125, 164), (127, 165), (129, 166), (130, 168), (129, 171), (127, 175), (125, 179), (123, 184), (121, 190), (120, 194), (119, 199), (120, 202), (123, 207), (127, 211), (133, 215), (142, 219), (148, 220), (151, 221)]}
right_curly_brace_points = {'name': 'right curly brace', 'points': [(117, 132), (115, 132), (115, 129), (117, 129), (119, 128), (122, 127), (125, 127), (127, 127), (130, 127), (133, 129), (136, 129), (138, 130), (140, 131), (143, 134), (144, 136), (145, 139), (145, 142), (145, 145), (145, 147), (145, 149), (144, 152), (142, 157), (141, 160), (139, 163), (137, 166), (135, 167), (133, 169), (131, 172), (128, 173), (126, 176), (125, 178), (125, 180), (125, 182), (126, 184), (128, 187), (130, 187), (132, 188), (135, 189), (140, 189), (145, 189), (150, 187), (155, 186), (157, 185), (159, 184), (156, 185), (154, 185), (149, 185), (145, 187), (141, 188), (136, 191), (134, 191), (131, 192), (129, 193), (129, 195), (129, 197), (131, 200), (133, 202), (136, 206), (139, 211), (142, 215), (145, 220), (147, 225), (148, 231), (147, 239), (144, 244), (139, 248), (134, 250), (126, 253), (119, 253), (115, 253)]}
star_points = {'name': 'star', 'points': [(75, 250), (75, 247), (77, 244), (78, 242), (79, 239), (80, 237), (82, 234), (82, 232), (84, 229), (85, 225), (87, 222), (88, 219), (89, 216), (91, 212), (92, 208), (94, 204), (95, 201), (96, 196), (97, 194), (98, 191), (100, 185), (102, 178), (104, 173), (104, 171), (105, 164), (106, 158), (107, 156), (107, 152), (108, 145), (109, 141), (110, 139), (112, 133), (113, 131), (116, 127), (117, 125), (119, 122), (121, 121), (123, 120), (125, 122), (125, 125), (127, 130), (128, 133), (131, 143), (136, 153), (140, 163), (144, 172), (145, 175), (151, 189), (156, 201), (161, 213), (166, 225), (169, 233), (171, 236), (174, 243), (177, 247), (178, 249), (179, 251), (180, 253), (180, 255), (179, 257), (177, 257), (174, 255), (169, 250), (164, 247), (160, 245), (149, 238), (138, 230), (127, 221), (124, 220), (112, 212), (110, 210), (96, 201), (84, 195), (74, 190), (64, 182), (55, 175), (51, 172), (49, 170), (51, 169), (56, 169), (66, 169), (78, 168), (92, 166), (107, 164), (123, 161), (140, 162), (156, 162), (171, 160), (173, 160), (186, 160), (195, 160), (198, 161), (203, 163), (208, 163), (206, 164), (200, 167), (187, 172), (174, 179), (172, 181), (153, 192), (137, 201), (123, 211), (112, 220), (99, 229), (90, 237), (80, 244), (73, 250), (69, 254), (69, 252)]}
pigtail_points = {'name': 'pigtail', 'points': [(81, 219), (84, 218), (86, 220), (88, 220), (90, 220), (92, 219), (95, 220), (97, 219), (99, 220), (102, 218), (105, 217), (107, 216), (110, 216), (113, 214), (116, 212), (118, 210), (121, 208), (124, 205), (126, 202), (129, 199), (132, 196), (136, 191), (139, 187), (142, 182), (144, 179), (146, 174), (148, 170), (149, 168), (151, 162), (152, 160), (152, 157), (152, 155), (152, 151), (152, 149), (152, 146), (149, 142), (148, 139), (145, 137), (141, 135), (139, 135), (134, 136), (130, 140), (128, 142), (126, 145), (122, 150), (119, 158), (117, 163), (115, 170), (114, 175), (117, 184), (120, 190), (125, 199), (129, 203), (133, 208), (138, 213), (145, 215), (155, 218), (164, 219), (166, 219), (177, 219), (182, 218), (192, 216), (196, 213), (199, 212), (201, 211)]}


original_gestures = [star_points, triangle_points, x_points, rectangle_points, circle_points, caret_points, arrow_points, left_square_bracket_points, right_square_bracket_points, v_points, delete_points, left_curly_brace_points, right_curly_brace_points, pigtail_points]

# USER A NEW TRIAL

# trial_1 = [(361, 122), (358, 118), (355, 109), (361, 110), (374, 102), (359, 96), (322, 91), (296, 87), (267, 85), (236, 82), (217, 81), (195, 80), (195, 85), (196, 95), (195, 116), (195, 136), (192, 172), (186, 205), (187, 229), (186, 251), (179, 260), (184, 260), (193, 258), (236, 259), (273, 261), (312, 264), (337, 268), (376, 285), (375, 284), (388, 281), (380, 275), (380, 282), (395, 286), (381, 284), (380, 291), (365, 287), (360, 290)]
# trial_2 = [(351, 131), (353, 132), (348, 134), (350, 136), (361, 129), (359, 130), (332, 122), (311, 118), (293, 114), (261, 108), (240, 109), (227, 108), (216, 110), (204, 107), (189, 110), (191, 124), (186, 152), (188, 176), (189, 209), (188, 226), (189, 247), (185, 253), (184, 266), (185, 282), (191, 283), (223, 285), (240, 285), (269, 289), (292, 290), (331, 293), (344, 293), (337, 305), (332, 315), (337, 334)]
# trial_3 = [(300, 85), (304, 75), (303, 68), (304, 68), (317, 72), (339, 94), (358, 110), (376, 124), (398, 144), (414, 163), (433, 193), (441, 208), (457, 232), (470, 258), (461, 252), (438, 246), (427, 245), (397, 244), (379, 237), (351, 233), (306, 228), (268, 230), (250, 234), (252, 231), (275, 217), (302, 197), (332, 169), (353, 151), (366, 133), (391, 115), (411, 99), (413, 94), (414, 100), (374, 90), (337, 84), (303, 90), (320, 106), (298, 98)]
# trial_4 = [(294, 70), (294, 70), (292, 72), (291, 75), (300, 75), (300, 81), (297, 75), (315, 80), (339, 94), (357, 109), (386, 133), (406, 155), (427, 180), (442, 191), (453, 211), (460, 220), (450, 219), (438, 219), (411, 214), (386, 208), (349, 194), (318, 184), (276, 187), (247, 190), (237, 195), (255, 192), (277, 175), (311, 156), (331, 140), (354, 127), (370, 114), (385, 100), (397, 92), (412, 87), (430, 83), (432, 75), (425, 71), (413, 64)]
# trial_5 = [(261, 69), (260, 69), (260, 70), (249, 69), (238, 67), (233, 79), (229, 95), (224, 110), (220, 123), (221, 136), (220, 157), (214, 172), (212, 186), (229, 187), (287, 198), (316, 199), (350, 209), (381, 217), (400, 218), (438, 226), (452, 230), (472, 238), (475, 235), (464, 202), (461, 174), (445, 183), (444, 174), (443, 129), (426, 124), (410, 119), (379, 112), (350, 107), (303, 100), (268, 97), (225, 98), (202, 99)]
# trial_6 = [(292, 120), (292, 118), (294, 108), (298, 108), (310, 104), (316, 110), (342, 127), (357, 141), (377, 159), (393, 177), (412, 198), (406, 197), (426, 221), (438, 237), (441, 244), (436, 244), (421, 242), (403, 243), (375, 247), (344, 240), (299, 238), (273, 242), (250, 246), (259, 242), (274, 236), (304, 212), (326, 203), (351, 177), (363, 167), (383, 148), (392, 140), (397, 124), (407, 107), (412, 105)]
# trial_7 = [(344, 106), (336, 100), (328, 97), (330, 97), (347, 102), (340, 102), (325, 99), (308, 95), (287, 92), (275, 91), (260, 88), (242, 87), (225, 84), (218, 85), (211, 96), (212, 115), (209, 132), (208, 153), (211, 174), (213, 186), (218, 217), (215, 229), (216, 238), (229, 242), (250, 242), (280, 247), (296, 245), (315, 243), (349, 259), (368, 261), (372, 255), (367, 247), (367, 256), (361, 260), (365, 260), (366, 263), (370, 262), (357, 260), (358, 258), (365, 259), (360, 260), (362, 266), (366, 269), (365, 273), (366, 273), (365, 274), (363, 277), (364, 279)]
# trial_8 = [(251, 57), (259, 59), (258, 58), (247, 53), (243, 53), (277, 74), (302, 94), (334, 121), (364, 153), (382, 169), (419, 214), (429, 231), (442, 251), (452, 271), (442, 266), (414, 256), (398, 252), (375, 249), (345, 253), (318, 244), (276, 246), (252, 242), (226, 248), (226, 244), (262, 222), (289, 201), (324, 180), (339, 165), (354, 156), (365, 143), (375, 138), (389, 129), (396, 127)]
# trial_9 = [(224, 98), (219, 97), (219, 95), (219, 96), (219, 99), (216, 113), (216, 135), (213, 151), (205, 172), (199, 187), (192, 208), (189, 216), (196, 226), (241, 225), (268, 226), (311, 228), (342, 233), (371, 238), (392, 238), (413, 244), (430, 249), (432, 247), (426, 223), (426, 212), (424, 190), (414, 213), (418, 159), (409, 140), (400, 127), (390, 128), (357, 124), (331, 118), (310, 116), (286, 112), (245, 110), (217, 111), (183, 107), (175, 108), (176, 108), (175, 110), (175, 111)]
# trial_10 = [(178, 93), (179, 87), (185, 87), (180, 89), (181, 87), (187, 111), (187, 128), (182, 145), (176, 169), (173, 187), (172, 209), (166, 221), (164, 227), (181, 231), (225, 232), (252, 230), (282, 233), (322, 243), (343, 243), (373, 244), (397, 246), (425, 259), (430, 257), (427, 243), (420, 219), (412, 186), (410, 167), (410, 158), (408, 131), (401, 133), (373, 131), (347, 129), (326, 122), (304, 119), (279, 118), (247, 113), (221, 112), (193, 113), (206, 112)]
# trial_11 = [(260, 135), (263, 134), (261, 132), (254, 129), (247, 126), (240, 146), (241, 172), (241, 192), (239, 217), (236, 237), (227, 267), (232, 269), (265, 272), (291, 274), (319, 273), (367, 272), (403, 278), (440, 280), (474, 286), (501, 293), (501, 276), (499, 241), (497, 221), (486, 195), (485, 175), (489, 160), (487, 162), (462, 162), (431, 160), (409, 158), (376, 154), (354, 155), (317, 155), (287, 156), (255, 158), (229, 158), (218, 159), (225, 158), (217, 158), (208, 161), (219, 167), (222, 170), (222, 167), (220, 170), (220, 171), (221, 170), (222, 171), (223, 171), (222, 173), (221, 174), (221, 176), (219, 176)]
# trial_12 = [(292, 82), (293, 76), (294, 74), (297, 79), (293, 76), (298, 73), (274, 67), (259, 70), (212, 62), (183, 59), (152, 53), (124, 54), (117, 55), (107, 59), (91, 87), (94, 61), (78, 82), (77, 109), (75, 129), (66, 161), (72, 179), (79, 207), (76, 227), (77, 248), (80, 253), (100, 249), (129, 249), (179, 248), (205, 255), (236, 260), (260, 262), (263, 257), (257, 253)]
# trial_13 = [(338, 111), (337, 106), (336, 103), (339, 107), (340, 109), (323, 94), (305, 90), (292, 88), (271, 83), (256, 81), (235, 79), (217, 79), (204, 79), (182, 76), (167, 79), (171, 98), (171, 112), (167, 135), (157, 148), (158, 161), (158, 187), (160, 211), (160, 228), (171, 232), (195, 232), (236, 232), (261, 237), (294, 240), (321, 252), (322, 248), (322, 252), (313, 257), (317, 260), (317, 258), (317, 255)]
# trial_14 = [(282, 55), (284, 54), (296, 57), (304, 62), (320, 72), (359, 99), (384, 125), (412, 151), (422, 165), (444, 192), (457, 200), (473, 227), (489, 260), (501, 282), (496, 281), (478, 276), (450, 272), (425, 269), (386, 265), (362, 262), (333, 262), (310, 262), (284, 260), (273, 261), (282, 256), (308, 233), (332, 228), (363, 204), (380, 196), (399, 177), (411, 164), (427, 156), (442, 149), (450, 143), (446, 143), (444, 152), (444, 154), (445, 156), (446, 157), (447, 161), (450, 163), (452, 164)]
# trial_15 = [(329, 88), (332, 79), (327, 75), (325, 75), (337, 78), (351, 89), (370, 103), (379, 113), (391, 126), (401, 136), (421, 160), (443, 184), (454, 200), (477, 225), (495, 256), (505, 272), (523, 306), (523, 311), (514, 307), (498, 306), (474, 302), (443, 295), (416, 290), (384, 278), (357, 273), (317, 273), (294, 272), (275, 275), (277, 269), (299, 265), (326, 248), (344, 235), (370, 213), (386, 193), (408, 181), (417, 170), (431, 152), (439, 146)]
# trial_16 = [(234, 93), (196, 126), (232, 88), (219, 102), (227, 91), (222, 94), (223, 106), (223, 103), (222, 121), (218, 142), (216, 157), (212, 178), (207, 202), (205, 219), (217, 217), (237, 218), (270, 218), (304, 221), (326, 228), (370, 236), (396, 235), (435, 236), (461, 242), (479, 247), (474, 228), (464, 189), (462, 168), (461, 150), (463, 137), (460, 126), (452, 125), (423, 122), (379, 114), (352, 112), (315, 106), (287, 106), (257, 107), (219, 106), (203, 105), (204, 104), (199, 106), (186, 110), (191, 115), (203, 124)]
# trial_17 = [(293, 103), (302, 105), (270, 81), (268, 91), (259, 95), (256, 115), (252, 128), (256, 144), (252, 155), (252, 171), (247, 188), (245, 202), (260, 203), (282, 205), (323, 207), (355, 212), (390, 216), (415, 221), (451, 226), (466, 231), (476, 236), (474, 219), (467, 193), (454, 152), (452, 138), (451, 119), (456, 120), (447, 119), (419, 112), (396, 109), (364, 103), (339, 102), (307, 99), (286, 99), (256, 97), (249, 101), (254, 95), (252, 94), (236, 100), (236, 103)]
# trial_18 = [(251, 93), (250, 92), (251, 92), (249, 92), (249, 93), (246, 115), (247, 130), (244, 143), (246, 163), (244, 180), (241, 200), (242, 212), (247, 214), (266, 217), (296, 225), (336, 225), (361, 229), (399, 235), (418, 239), (446, 248), (451, 248), (451, 239), (450, 220), (442, 186), (441, 162), (442, 146), (445, 147), (438, 147), (413, 143), (388, 138), (364, 135), (334, 134), (304, 126), (259, 124), (240, 123), (231, 124)]
# trial_19 = [(352, 68), (348, 71), (346, 67), (364, 72), (400, 77), (373, 70), (350, 66), (321, 67), (289, 64), (262, 58), (247, 56), (216, 52), (190, 51), (170, 50), (168, 69), (169, 89), (178, 124), (175, 154), (173, 177), (172, 199), (174, 228), (172, 247), (174, 258), (192, 259), (233, 254), (272, 262), (294, 261), (324, 264), (345, 266), (367, 275)]
# trial_20 = [(290, 70), (293, 71), (296, 55), (296, 53), (292, 55), (332, 79), (356, 99), (370, 116), (400, 145), (411, 162), (438, 193), (463, 224), (484, 253), (499, 282), (490, 282), (448, 272), (418, 266), (370, 261), (343, 258), (319, 255), (287, 252), (266, 250), (230, 252), (228, 250), (255, 240), (289, 218), (321, 200), (349, 184), (369, 168), (396, 149), (409, 135), (418, 128), (395, 113), (380, 107), (375, 107), (378, 107), (379, 110)]
# trial_21 = [(241, 90), (237, 92), (238, 91), (233, 93), (234, 108), (232, 122), (229, 142), (221, 165), (215, 186), (206, 219), (199, 236), (212, 238), (232, 240), (274, 241), (306, 246), (332, 250), (366, 249), (384, 267), (387, 253), (430, 267), (454, 273), (464, 274), (464, 258), (462, 220), (448, 183), (446, 157), (441, 136), (441, 125), (442, 122), (436, 122), (410, 119), (370, 114), (347, 113), (316, 111), (300, 111), (270, 108), (266, 110), (246, 108), (227, 111)]
# trial_22 = [(399, 63), (414, 73), (407, 65), (405, 69), (377, 64), (358, 61), (323, 54), (296, 53), (271, 52), (228, 48), (186, 47), (184, 52), (193, 83), (192, 108), (192, 142), (189, 165), (188, 197), (187, 223), (182, 267), (175, 293), (177, 291), (208, 289), (239, 284), (290, 289), (322, 287), (366, 296), (372, 308), (376, 302)]
# trial_23 = [(308, 67), (310, 65), (308, 61), (308, 59), (302, 56), (331, 85), (356, 109), (386, 139), (397, 155), (417, 176), (440, 205), (465, 241), (489, 273), (497, 292), (500, 298), (469, 292), (438, 289), (408, 281), (362, 278), (319, 275), (293, 269), (266, 278), (285, 260), (334, 226), (360, 210), (390, 188), (406, 175), (427, 161), (440, 154), (446, 161), (451, 171), (446, 174), (430, 198), (462, 253)]
# trial_24 = [(348, 37), (353, 38), (366, 34), (366, 33), (345, 33), (319, 33), (287, 35), (254, 34), (224, 31), (182, 31), (173, 35), (177, 47), (181, 61), (186, 91), (183, 119), (182, 142), (186, 182), (183, 210), (179, 212), (195, 211), (241, 210), (279, 215), (302, 218), (338, 225), (343, 224)]
# trial_25 = [(282, 63), (277, 60), (263, 56), (255, 56), (238, 51), (237, 66), (238, 77), (238, 101), (241, 117), (242, 134), (241, 159), (235, 182), (235, 198), (242, 198), (274, 202), (315, 206), (359, 212), (395, 223), (424, 224), (460, 235), (489, 251), (485, 228), (478, 189), (474, 174), (468, 138), (466, 117), (467, 119), (430, 114), (394, 110), (340, 100), (297, 95), (238, 92), (239, 91)]
# trial_26 = [(294, 59), (287, 55), (274, 56), (266, 57), (251, 53), (248, 65), (251, 86), (253, 100), (250, 126), (246, 147), (245, 177), (243, 202), (259, 202), (294, 208), (329, 208), (377, 218), (400, 221), (438, 227), (480, 242), (508, 256), (497, 231), (491, 204), (482, 154), (479, 129), (471, 102), (477, 107), (439, 108), (411, 104), (377, 102), (340, 97), (306, 94), (263, 91), (240, 91), (271, 92)]
# trial_27 = [(367, 72), (364, 69), (363, 66), (366, 67), (386, 75), (363, 72), (335, 70), (306, 65), (282, 63), (254, 58), (215, 61), (213, 68), (216, 97), (215, 121), (217, 158), (217, 194), (215, 234), (208, 269), (219, 277), (252, 269), (283, 268), (332, 272), (354, 274), (376, 281), (389, 288)]
# trial_28 = [(281, 52), (287, 54), (295, 54), (291, 56), (283, 56), (302, 73), (326, 96), (355, 122), (375, 137), (403, 169), (418, 190), (449, 233), (471, 266), (454, 260), (428, 257), (395, 257), (346, 251), (308, 247), (238, 246), (216, 252), (227, 247), (251, 228), (309, 195), (308, 194), (360, 161), (392, 145), (416, 125), (437, 118), (444, 122), (446, 134)]
# trial_29 = [(298, 47), (296, 43), (300, 41), (292, 42), (291, 50), (327, 78), (355, 102), (393, 134), (432, 175), (456, 211), (470, 239), (503, 294), (505, 305), (480, 296), (424, 278), (381, 274), (332, 271), (280, 262), (256, 269), (275, 262), (319, 227), (370, 199), (371, 192), (401, 161), (427, 148), (451, 120), (455, 127), (452, 146), (445, 154), (444, 154)]
# trial_30 = [(372, 95), (377, 92), (376, 92), (386, 94), (387, 95), (359, 92), (334, 90), (301, 88), (275, 86), (240, 83), (207, 82), (201, 87), (196, 101), (192, 133), (191, 165), (191, 189), (184, 214), (178, 232), (177, 253), (179, 281), (182, 290), (189, 293), (216, 292), (256, 286), (288, 284), (323, 284), (338, 284), (337, 285), (333, 285), (333, 282), (322, 277), (320, 284), (319, 286), (320, 284), (316, 282), (318, 282), (323, 283)]

# USER A

# trial_1 = [(259, 146), (260, 145), (258, 152), (255, 168), (252, 185), (250, 193), (245, 209), (245, 240), (240, 255), (236, 269), (239, 267), (242, 267), (261, 273), (289, 273), (291, 274), (310, 271), (393, 337), (347, 266), (384, 270), (405, 273), (426, 295), (441, 283), (433, 300), (440, 275), (439, 268), (435, 250), (435, 224), (434, 213), (433, 189), (432, 172), (432, 169), (436, 176), (432, 178), (426, 178), (406, 180), (380, 175), (262, 222), (222, 193), (212, 165), (188, 159), (183, 162), (212, 174), (249, 180), (247, 180)]
# trial_2 = [(355, 148), (344, 144), (338, 146), (333, 157), (323, 165), (290, 189), (278, 201), (257, 222), (235, 239), (223, 250), (212, 260), (213, 262), (217, 262), (234, 266), (247, 268), (280, 268), (279, 269), (298, 271), (344, 309), (333, 273), (372, 282), (389, 279), (417, 277), (436, 287), (435, 289), (432, 285), (424, 275), (417, 270), (389, 254), (350, 236), (353, 241), (368, 215), (325, 181), (299, 162), (285, 153), (262, 134), (238, 122), (235, 117), (234, 119), (238, 126), (261, 138), (265, 144), (262, 156), (265, 162)]
# trial_3 = [(253, 148), (246, 139), (242, 144), (239, 151), (235, 169), (231, 176), (231, 193), (230, 201), (228, 215), (228, 239), (229, 259), (226, 260), (234, 261), (241, 262), (263, 259), (290, 257), (306, 259), (339, 259), (382, 258), (373, 262), (394, 254), (429, 254), (443, 265), (451, 264), (446, 264), (444, 255), (441, 250), (441, 233), (441, 218), (441, 206), (436, 175), (435, 154), (433, 140), (435, 142), (438, 148), (430, 146), (428, 150), (415, 151), (392, 148), (354, 143), (261, 137), (248, 141), (218, 140), (191, 140), (187, 140), (189, 140), (199, 143), (209, 145), (221, 146)]
# trial_4 = [(265, 204), (256, 172), (213, 151), (210, 146), (218, 154), (226, 162), (277, 218), (276, 212), (274, 213)]
# trial_5 = [(239, 342), (268, 322), (290, 311), (306, 298), (338, 274), (338, 274), (366, 250), (376, 243), (398, 219), (417, 198), (424, 186), (435, 166), (437, 161), (432, 160), (431, 160), (416, 170), (404, 185), (353, 194)]
# trial_6 = [(374, 176), (367, 168), (360, 167), (341, 169), (335, 167), (305, 172), (294, 170), (270, 173), (249, 169), (238, 170), (209, 170), (185, 169), (178, 166), (178, 171), (179, 170), (182, 183), (179, 190), (177, 210), (178, 220), (174, 240), (167, 261), (164, 271), (158, 305), (153, 320), (144, 341), (146, 374), (141, 389), (141, 387), (143, 384), (162, 388), (170, 390)]
# trial_7 = [(445, 380), (428, 360), (401, 366), (389, 370), (371, 359), (353, 365), (313, 366), (290, 361), (282, 360), (282, 362), (287, 360), (296, 354), (307, 347), (342, 330), (361, 323), (372, 306), (395, 286), (389, 293), (410, 269), (421, 253), (442, 228), (437, 230), (449, 213), (456, 208), (458, 205), (456, 200), (459, 197), (458, 195), (454, 197), (439, 204), (354, 253)]
# trial_8 = [(420, 389), (388, 358), (370, 353), (355, 351), (321, 350), (289, 348), (277, 346), (253, 347), (239, 351), (237, 351), (240, 347), (247, 344), (261, 338), (301, 310), (358, 269), (375, 252), (407, 221), (430, 181), (422, 189), (437, 168), (444, 164), (448, 159), (445, 150), (443, 149), (438, 150), (437, 150), (427, 169), (353, 198)]
# trial_9 = [(261, 151), (258, 148), (257, 150), (254, 159), (251, 169), (250, 177), (248, 188), (246, 201), (246, 210), (244, 220), (239, 230), (237, 238), (230, 245), (234, 245), (239, 247), (253, 248), (277, 245), (291, 243), (318, 240), (335, 244), (348, 243), (371, 247), (392, 247), (405, 249), (426, 249), (448, 252), (452, 253), (454, 253), (452, 245), (450, 239), (450, 230), (446, 214), (443, 208), (442, 193), (442, 176), (443, 170), (440, 150), (439, 143), (436, 146), (439, 146), (434, 147), (428, 150), (426, 148), (422, 149), (401, 151), (394, 149), (369, 147), (341, 150), (331, 153), (302, 149), (279, 150), (261, 154), (250, 157), (224, 157), (199, 158), (190, 159), (191, 162), (214, 170), (255, 187), (253, 187), (267, 198), (294, 214)]
# trial_10 = [(398, 207), (424, 189), (424, 177), (423, 157), (425, 160), (431, 167), (424, 168), (416, 169), (387, 171), (351, 168), (239, 177), (220, 172), (202, 173), (175, 172), (170, 170), (175, 179), (211, 208), (207, 203), (227, 212), (253, 237)]
# trial_11 = [(358, 157), (363, 157), (350, 147), (340, 147), (331, 146), (315, 145), (287, 150), (275, 148), (250, 150), (236, 151), (209, 149), (186, 147), (174, 151), (180, 154), (183, 163), (188, 183), (189, 196), (186, 214), (188, 240), (182, 259), (181, 272), (177, 289), (174, 300), (173, 305), (174, 307), (185, 305), (195, 304), (212, 306), (234, 307), (243, 307), (234, 354), (266, 306), (298, 310), (312, 308), (316, 304), (313, 306), (311, 301), (287, 262)]
# trial_12 = [(371, 163), (364, 151), (357, 151), (345, 152), (337, 148), (325, 153), (294, 146), (269, 145), (258, 147), (234, 151), (212, 151), (199, 151), (183, 151), (180, 152), (182, 152), (185, 161), (186, 175), (186, 182), (181, 200), (181, 211), (182, 233), (178, 251), (174, 260), (172, 283), (171, 299), (171, 308), (171, 315), (172, 316), (184, 314), (208, 315), (218, 312), (246, 311), (278, 313), (277, 312), (293, 310), (317, 306), (315, 305), (316, 306), (316, 306), (293, 281)]
# trial_13 = [(406, 314), (417, 278), (433, 299), (440, 308), (444, 316), (438, 315), (430, 315), (403, 313), (375, 304), (361, 304), (337, 303), (303, 301), (286, 302), (254, 301), (239, 302), (236, 303), (239, 305), (251, 298), (262, 293), (286, 283), (315, 262), (308, 280), (333, 253), (365, 228), (379, 216), (406, 204), (426, 189), (434, 183), (447, 176), (448, 177), (447, 176), (444, 178), (440, 181), (434, 190), (356, 210)]
# trial_14 = [(411, 364), (373, 319), (346, 318), (331, 318), (305, 320), (289, 321), (262, 319), (252, 321), (255, 320), (270, 310), (291, 297), (292, 297), (314, 299), (366, 244), (410, 215), (430, 191), (432, 193), (436, 182), (440, 167), (442, 163), (440, 163), (438, 167), (425, 179), (405, 202), (328, 250)]
# trial_15 = [(318, 166), (313, 164), (319, 163), (319, 167), (329, 181), (352, 202), (364, 210), (381, 229), (387, 243), (410, 262), (431, 287), (447, 308), (453, 318), (463, 326), (466, 326), (464, 328), (457, 328), (443, 327), (436, 326), (413, 320), (386, 326), (356, 307), (324, 305), (306, 304), (274, 304), (232, 308), (214, 308), (196, 304), (200, 304), (216, 296), (242, 288), (270, 274), (297, 257), (353, 219), (350, 226), (389, 192), (385, 193), (404, 183), (411, 176), (417, 169), (422, 162), (428, 158), (426, 157), (412, 157), (383, 169)]
# trial_16 = [(242, 153), (237, 151), (234, 155), (228, 163), (222, 169), (217, 179), (212, 188), (212, 196), (208, 207), (207, 218), (205, 224), (200, 232), (197, 235), (197, 234), (209, 237), (237, 236), (270, 238), (294, 231), (327, 233), (347, 237), (379, 244), (414, 248), (411, 247), (436, 251), (444, 253), (445, 250), (444, 243), (440, 222), (437, 201), (436, 178), (435, 168), (435, 154), (434, 154), (437, 155), (432, 156), (414, 155), (415, 157), (404, 156), (379, 154), (367, 154), (339, 152), (293, 151), (261, 153), (235, 154), (225, 153), (203, 154), (193, 156), (195, 155), (210, 162), (217, 177), (225, 182), (236, 179)]
# trial_17 = [(300, 131), (289, 122), (283, 131), (301, 139), (312, 143), (330, 160), (341, 170), (360, 192), (380, 202), (392, 212), (406, 227), (417, 241), (430, 254), (434, 260), (434, 267), (436, 267), (432, 269), (437, 280), (434, 289), (438, 289), (432, 287), (408, 282), (375, 278), (359, 276), (329, 272), (300, 269), (291, 272), (284, 272), (292, 269), (299, 267), (324, 256), (356, 236), (356, 243), (365, 227), (389, 200), (386, 201), (407, 178), (416, 172), (432, 162), (436, 157), (438, 148), (439, 151), (437, 151), (432, 149), (410, 159), (322, 227)]
# trial_18 = [(359, 159), (362, 159), (365, 161), (359, 154), (357, 154), (356, 154), (354, 155), (346, 151), (336, 148), (330, 150), (315, 149), (307, 148), (280, 148), (273, 145), (253, 145), (225, 146), (219, 145), (203, 140), (195, 141), (178, 142), (180, 141), (183, 144), (188, 149), (187, 153), (183, 164), (181, 174), (181, 190), (182, 195), (178, 209), (174, 219), (174, 227), (172, 238), (170, 255), (169, 262), (166, 264), (166, 265), (169, 264), (186, 265), (198, 263), (219, 262), (232, 264), (257, 263), (283, 260), (295, 260), (308, 262), (306, 261), (300, 257), (286, 231), (268, 222)]
# trial_19 = [(254, 138), (247, 137), (239, 145), (239, 156), (240, 160), (239, 170), (238, 178), (231, 190), (227, 202), (226, 207), (226, 222), (223, 233), (219, 246), (217, 251), (211, 261), (209, 265), (213, 267), (230, 269), (244, 272), (271, 265), (295, 266), (309, 268), (333, 264), (361, 265), (374, 266), (396, 260), (422, 263), (433, 264), (462, 270), (469, 269), (472, 267), (470, 252), (467, 230), (461, 206), (460, 194), (454, 176), (451, 159), (451, 153), (453, 153), (451, 156), (449, 156), (449, 156), (443, 158), (428, 160), (418, 158), (390, 157), (355, 148), (306, 152), (272, 149), (246, 151), (234, 152), (210, 150), (186, 152), (176, 155), (174, 156), (180, 161), (198, 170), (219, 189)]
# trial_20 = [(370, 144), (361, 141), (360, 142), (349, 139), (343, 137), (326, 139), (318, 136), (303, 138), (282, 139), (268, 136), (261, 136), (241, 136), (211, 144), (211, 136), (203, 136), (201, 136), (204, 137), (204, 147), (203, 157), (203, 166), (203, 185), (204, 200), (203, 207), (203, 218), (203, 228), (201, 240), (199, 245), (199, 257), (200, 274), (196, 279), (195, 289), (195, 298), (205, 298), (214, 298), (239, 299), (227, 346), (264, 299), (278, 297), (308, 296), (335, 296), (333, 295), (336, 296), (331, 306), (332, 295), (310, 286), (312, 262), (310, 270), (299, 247), (295, 252)]
# trial_21 = [(356, 166), (358, 167), (372, 179), (379, 188), (401, 208), (410, 222), (414, 231), (425, 242), (436, 259), (446, 272), (454, 294), (463, 294), (468, 301), (463, 300), (446, 296), (435, 294), (413, 290), (387, 287), (374, 286), (345, 284), (297, 280), (272, 282), (268, 278), (273, 278), (288, 267), (302, 260), (335, 231), (377, 195), (402, 166), (411, 157), (426, 145), (438, 136), (443, 135), (442, 132), (433, 140), (395, 157), (336, 176)]
# trial_22 = [(265, 136), (254, 127), (237, 120), (215, 126), (197, 121), (189, 118), (187, 119), (182, 119), (181, 121), (177, 125), (175, 141), (173, 159), (171, 167), (170, 185), (171, 203), (170, 212), (167, 228), (162, 243), (162, 252), (160, 271), (158, 280), (159, 290), (163, 292), (167, 293), (189, 293), (213, 290), (227, 290), (251, 289), (252, 289), (288, 289), (300, 289), (306, 288), (293, 278), (275, 254)]
# trial_23 = [(204, 328), (207, 328), (234, 326), (246, 326), (242, 378), (267, 328), (281, 327), (310, 333), (337, 331), (338, 333), (336, 332), (319, 313), (283, 270), (279, 259)]
# trial_24 = [(252, 121), (248, 130), (243, 135), (239, 147), (237, 161), (236, 168), (233, 182), (228, 196), (226, 204), (225, 219), (224, 224), (220, 236), (221, 249), (219, 249), (219, 250), (231, 253), (251, 251), (264, 251), (293, 245), (307, 247), (331, 248), (356, 251), (367, 253), (389, 253), (414, 255), (442, 253), (443, 252), (452, 257), (450, 254), (440, 284), (460, 262), (462, 263), (464, 260), (460, 250), (455, 226), (453, 212), (451, 196), (451, 192), (449, 179), (444, 167), (438, 153), (435, 146), (438, 153), (438, 155), (429, 155), (412, 152), (398, 153), (368, 146), (342, 149), (334, 155), (265, 146), (241, 150), (229, 151), (202, 151), (184, 152), (188, 155), (214, 169), (244, 189), (241, 188), (263, 185), (272, 185)]
# trial_25 = [(371, 161), (368, 158), (370, 158), (365, 154), (354, 151), (347, 152), (332, 150), (319, 149), (312, 148), (283, 150), (265, 148), (257, 149), (235, 150), (218, 151), (210, 149), (191, 151), (177, 152), (174, 152), (177, 156), (179, 158), (180, 173), (176, 184), (176, 191), (173, 205), (170, 224), (167, 232), (167, 250), (167, 264), (165, 271), (164, 291), (163, 317), (157, 328), (157, 328), (164, 324), (173, 322), (197, 317), (217, 317), (228, 317), (251, 317), (260, 316), (280, 317), (302, 323), (311, 323), (319, 326), (318, 321), (310, 304), (290, 264), (279, 246)]
# trial_26 = [(402, 287), (435, 267), (449, 272), (452, 273), (455, 267), (447, 247), (449, 246), (450, 237), (449, 217), (450, 209), (450, 190), (450, 192), (451, 179), (452, 175), (451, 177), (451, 176), (444, 174), (431, 174), (411, 180), (412, 173), (402, 172), (376, 170), (352, 165), (324, 166), (296, 164), (269, 164), (245, 166), (233, 166), (218, 164), (203, 162), (194, 164), (191, 165), (201, 166), (211, 169), (243, 183), (258, 187), (268, 181)]
# trial_27 = [(252, 127), (250, 123), (246, 122), (245, 134), (245, 147), (246, 162), (247, 174), (248, 187), (250, 202), (246, 217), (243, 248), (241, 262), (240, 284), (237, 298), (234, 309), (233, 308), (238, 310), (254, 313), (281, 315), (292, 315), (317, 319), (349, 324), (377, 326), (391, 327), (425, 331), (427, 331), (455, 329), (469, 333), (494, 347), (501, 349), (497, 342), (494, 333), (491, 310), (487, 278), (485, 267), (479, 238), (479, 227), (473, 195), (473, 185), (472, 187), (469, 189), (465, 189), (446, 187), (428, 184), (399, 182), (373, 178), (348, 177), (260, 172), (216, 177), (184, 177), (172, 182), (177, 185), (199, 187), (215, 183), (244, 179)]
# trial_28 = [(241, 122), (237, 123), (229, 135), (225, 149), (226, 158), (226, 168), (224, 182), (222, 187), (219, 200), (215, 212), (214, 223), (210, 243), (208, 251), (212, 252), (219, 254), (237, 258), (265, 257), (280, 257), (305, 259), (304, 282), (328, 260), (355, 266), (387, 273), (421, 278), (460, 289), (458, 286), (477, 291), (482, 305), (486, 294), (483, 285), (480, 259), (478, 244), (474, 217), (472, 195), (472, 184), (469, 166), (467, 162), (466, 163), (456, 165), (439, 165), (427, 163), (399, 162), (364, 156), (198, 153), (165, 151), (157, 154), (160, 156), (204, 168), (224, 175), (260, 190), (283, 198)]
# trial_29 = [(384, 134), (387, 134), (387, 135), (390, 134), (385, 124), (383, 124), (373, 123), (362, 124), (347, 127), (322, 132), (317, 126), (288, 137), (273, 128), (261, 130), (239, 128), (235, 127), (218, 127), (204, 120), (195, 118), (195, 122), (197, 128), (199, 135), (201, 147), (202, 154), (201, 166), (203, 176), (199, 192), (196, 211), (192, 223), (191, 229), (191, 241), (190, 265), (190, 273), (187, 282), (184, 287), (186, 287), (193, 287), (212, 286), (234, 285), (247, 285), (269, 286), (278, 287), (298, 292), (300, 288), (327, 291), (342, 296), (366, 296), (367, 296), (356, 292), (327, 261), (301, 237), (295, 233)]
# trial_30 = [(317, 139), (307, 139), (284, 142), (293, 136), (269, 139), (251, 138), (239, 137), (235, 137), (222, 140), (212, 140), (212, 141), (216, 147), (218, 151), (217, 161), (217, 171), (218, 175), (217, 186), (215, 202), (214, 212), (214, 218), (214, 224), (215, 231), (215, 234), (215, 244), (213, 252), (215, 255), (214, 263), (213, 270), (213, 271), (223, 271), (231, 270), (247, 270), (267, 270), (277, 272), (297, 274), (308, 275), (329, 275), (330, 277), (352, 278), (359, 278), (363, 278), (358, 278), (353, 275), (313, 256), (315, 252)]



# #USER B
trial_1 = [(498, 325), (646, 292), (572, 295), (535, 253)]
trial_2 = [(429, 44), (412, 33), (373, 16)]
trial_3 = [(322, 116), (226, 92), (184, 66), (187, 59), (196, 58), (198, 67), (199, 89), (164, 160), (146, 230), (123, 246), (127, 272), (245, 364), (285, 417), (369, 311), (359, 305)]
trial_4 = [(332, 389), (313, 330), (291, 319)]
trial_5 = [(608, 209), (634, 142), (640, 117), (606, 110), (204, 75), (160, 87), (192, 60)]
trial_6 = [(208, 180), (217, 180), (217, 183), (231, 189), (232, 195), (228, 222), (193, 291), (231, 243), (222, 290), (213, 326), (206, 377), (202, 418), (606, 450), (602, 417), (596, 375), (589, 329), (569, 243), (553, 204), (543, 201), (510, 210), (510, 207), (473, 206), (355, 194), (172, 190), (150, 192), (173, 170)]
trial_7 = [(266, 215), (249, 249), (249, 245), (245, 242), (254, 192), (243, 188), (241, 204), (236, 252), (231, 290), (231, 328), (236, 367), (282, 429), (598, 418), (568, 348), (579, 283), (594, 253), (582, 254), (543, 256), (499, 250), (405, 245), (245, 255), (155, 248), (153, 246), (186, 216)]
trial_8 = [(306, 148), (294, 123), (285, 128), (282, 144), (285, 155), (277, 177), (262, 172), (229, 246), (225, 253), (233, 252), (234, 249), (238, 249), (233, 234), (235, 180), (223, 207), (212, 258), (203, 289), (200, 342), (618, 403), (618, 389), (604, 292), (571, 324), (566, 280), (592, 251), (579, 257), (548, 257), (490, 249), (326, 242), (223, 248), (227, 254), (162, 250), (184, 207), (198, 202), (195, 213), (193, 209), (199, 198)]
trial_9 = [(327, 405), (379, 359), (482, 265), (474, 272), (467, 283), (473, 241)]
trial_10 = [(558, 320), (534, 347), (545, 310), (554, 300), (553, 301), (517, 293), (477, 285), (416, 283), (332, 279), (257, 286), (256, 290), (246, 261)]
trial_11 = [(463, 195), (474, 183), (465, 185), (434, 164), (395, 155), (353, 149), (296, 144), (236, 137), (174, 126), (177, 128), (185, 134), (202, 184), (207, 237), (213, 313)]
trial_12 = [(439, 8), (432, 12), (418, -2), (395, -3), (359, -10), (273, 0), (243, -7), (227, -9), (224, -7), (234, 20), (239, 45), (240, 86), (219, 210), (206, 264), (197, 306), (199, 350), (207, 342), (393, 323), (397, 283)]
trial_13 = [(407, 5), (354, 8), (283, -20), (269, -23), (252, -22), (243, -22), (244, -19), (242, -9), (238, 11), (239, 33), (242, 77), (236, 141), (228, 231), (229, 256), (237, 261), (253, 258), (316, 252), (314, 249), (467, 260), (477, 256), (464, 209), (463, 201)]
trial_14 = [(418, 311), (378, 306), (327, 306), (255, 314), (226, 324), (220, 325), (230, 321), (299, 273), (277, 310), (404, 172), (448, 135), (434, 161), (469, 135), (491, 98), (484, 101), (488, 104), (466, 102)]
trial_15 = [(482, 5), (460, -7), (435, -11), (408, -12), (314, -18), (286, -14), (238, -23), (210, -29), (212, -21), (201, -12), (179, 87), (175, 199), (171, 238), (161, 299), (170, 325), (188, 322), (234, 319), (368, 328), (432, 337), (468, 344), (492, 314)]
trial_16 = [(236, 76), (238, 67), (237, 72), (234, 86), (234, 127), (232, 149), (235, 192), (233, 230), (212, 290), (215, 319), (212, 317), (210, 346), (208, 347), (206, 378), (213, 375), (230, 377), (238, 378), (281, 381), (313, 385), (313, 383), (352, 384), (383, 383), (388, 380), (497, 377), (612, 382), (622, 381), (625, 381), (622, 375), (609, 348), (596, 307), (596, 267), (590, 235), (583, 199), (582, 200), (577, 199), (572, 199), (537, 191), (514, 186), (467, 176), (381, 164), (362, 160), (221, 157), (187, 157), (150, 166), (155, 162), (167, 141), (183, 127)]
trial_17 = [(383, 82), (382, 71), (368, 68), (340, 60), (305, 50), (245, 41), (210, 42), (186, 44), (183, 50), (190, 58), (199, 86), (208, 110), (212, 132), (203, 184), (203, 219), (210, 255), (209, 278), (208, 307), (183, 392), (199, 381)]
trial_18 = [(204, 432), (552, 398), (538, 330), (522, 301), (519, 274), (513, 264), (505, 266), (496, 266), (479, 263), (440, 258), (402, 251), (353, 245), (345, 254), (231, 246), (198, 251), (188, 255), (193, 253), (204, 224), (205, 214), (206, 213), (211, 222), (214, 224), (185, 217), (141, 253), (281, 360), (290, 393), (329, 411)]
trial_19 = [(249, 400), (304, 315), (341, 273), (322, 293), (432, 186), (461, 168), (487, 155), (491, 150), (492, 138), (484, 122), (470, 109)]
trial_20 = [(205, 389), (206, 387), (232, 373), (262, 337), (264, 335), (304, 312), (347, 272), (336, 285), (372, 259), (418, 213), (395, 227), (432, 194), (444, 172), (444, 168), (458, 124)]
trial_21 = [(522, 326), (550, 325), (550, 324), (548, 322), (546, 318), (541, 299), (530, 255), (524, 235), (514, 214), (502, 188), (499, 186), (497, 185), (477, 180), (457, 177), (431, 176), (399, 177), (356, 175), (277, 168), (245, 168), (217, 166), (203, 165), (200, 176), (229, 150)]
trial_22 = [(372, 363), (393, 359), (297, 381), (347, 356), (300, 360), (253, 359), (252, 360), (181, 362), (184, 365), (163, 362), (149, 367), (147, 367), (172, 347), (169, 352), (193, 330), (201, 328), (234, 302), (294, 261), (285, 282), (322, 258), (368, 208), (356, 227), (450, 144), (486, 133), (503, 118), (532, 103), (563, 103), (558, 106), (560, 95), (551, 92), (529, 90)]
trial_23 = [(424, 340), (582, 352), (628, 348), (668, 356), (664, 361), (661, 356), (660, 355), (660, 358), (664, 335), (644, 302), (621, 270), (603, 229), (587, 195), (570, 156), (563, 148), (560, 149), (537, 141), (501, 130), (450, 121), (300, 109), (156, 102), (91, 108), (49, 119), (25, 124), (33, 108), (36, 88)]
trial_24 = [(217, -27), (229, -39), (259, -8), (344, 59), (386, 90), (427, 121), (451, 141), (506, 210), (499, 203), (512, 224), (515, 226), (516, 229), (514, 227), (497, 224), (475, 219), (454, 213), (367, 205), (316, 203), (273, 203), (243, 198), (204, 197), (178, 197), (169, 204), (165, 210), (169, 206), (180, 202), (198, 193), (219, 171), (238, 160), (262, 145), (287, 128), (329, 95), (327, 112), (354, 100), (389, 63), (384, 79), (424, 67), (452, 44), (467, 37), (482, 35), (492, 34), (493, 34), (492, 37), (496, 38), (502, 40), (501, 35), (494, 18)]
trial_25 = [(525, 45), (534, 23), (535, 24), (535, 25), (541, 25), (536, 24), (539, 30), (538, 28), (528, 56)]
trial_26 = [(241, 185), (301, 148), (351, 105), (436, 56), (472, 38), (495, 16), (496, 15), (517, -7), (517, 9), (517, -6), (511, -21), (507, -24), (516, -28), (522, -25), (516, -14), (524, -25), (534, -12), (521, 42), (518, 33)]
trial_27 = [(559, 124), (580, 114), (582, 114), (578, 79), (572, 48), (577, 29)]
trial_28 = [(553, 38), (572, 11), (563, -9), (559, -8), (547, 9), (535, 29), (497, 147)]
trial_29 = [(465, 213), (553, 173), (549, 175), (665, 219), (688, 225), (671, 178), (664, 139), (656, 107), (647, 60), (649, 64), (665, 75), (658, 77), (610, 74), (557, 67), (477, 59), (375, 49), (198, 55), (119, 62), (86, 76), (80, 85), (85, 97), (140, 34)]

#USER C

# trial_1 = [(361, 62), (364, 57), (367, 49), (370, 48), (374, 48), (367, 48), (361, 48), (354, 46), (345, 46), (321, 42), (306, 41), (288, 39), (272, 37), (254, 35), (236, 33), (215, 32), (193, 31), (194, 44), (207, 59), (211, 77), (214, 91), (216, 104), (217, 118), (220, 147), (221, 161), (223, 180), (223, 207), (224, 226), (222, 247), (221, 263), (223, 258), (233, 255), (247, 253), (272, 253), (291, 256), (306, 259), (318, 259), (330, 260), (348, 258), (402, 260), (408, 271), (385, 254), (369, 217), (333, 172)]
# trial_2 = [(295, 85), (293, 78), (289, 74), (287, 71), (284, 71), (284, 71), (289, 77), (292, 81), (296, 90), (305, 102), (310, 109), (325, 126), (341, 145), (349, 153), (364, 169), (380, 190), (391, 203), (406, 227), (424, 247), (437, 263), (442, 280), (441, 281), (433, 278), (417, 281), (394, 287), (376, 283), (355, 280), (333, 280), (317, 278), (285, 275), (246, 269), (231, 273), (233, 272), (251, 269), (278, 260), (294, 253), (326, 232), (324, 235), (351, 215), (369, 207), (398, 188), (396, 189), (409, 177), (449, 137), (422, 161), (453, 130), (446, 135), (400, 139)]
# trial_3 = [(236, 138), (235, 130), (227, 126), (227, 125), (227, 124), (226, 131), (226, 142), (227, 153), (227, 168), (228, 175), (230, 192), (232, 207), (232, 223), (233, 242), (233, 253), (224, 276), (202, 298), (204, 302), (215, 298), (237, 301), (252, 302), (289, 302), (303, 303), (344, 300), (369, 300), (383, 303), (416, 311), (449, 307), (476, 312), (483, 321), (481, 320), (479, 299), (477, 279), (478, 271), (476, 251), (468, 228), (458, 194), (462, 199), (460, 202), (459, 200), (444, 200), (413, 197), (373, 193), (354, 185), (340, 187), (307, 182), (275, 182), (251, 184), (182, 189), (179, 190), (211, 188), (273, 189), (265, 191), (294, 183)]
# trial_4 = [(251, 143), (253, 135), (240, 125), (242, 126), (245, 129), (250, 143), (249, 151), (243, 165), (245, 184), (244, 197), (240, 220), (241, 232), (238, 250), (236, 262), (227, 285), (234, 284), (243, 284), (274, 287), (294, 288), (337, 293), (377, 294), (392, 297), (416, 299), (438, 305), (483, 305), (528, 309), (531, 316), (526, 302), (519, 281), (510, 248), (506, 220), (504, 205), (497, 178), (503, 173), (500, 173), (463, 174), (401, 206), (387, 181), (351, 179), (367, 165), (325, 180), (328, 160), (221, 162), (171, 162), (167, 163), (205, 177), (291, 179)]
# trial_5 = [(374, 93), (386, 88), (385, 85), (382, 82), (371, 82), (357, 81), (349, 81), (330, 79), (306, 75), (289, 74), (268, 72), (254, 72), (222, 72), (202, 74), (171, 73), (173, 83), (176, 93), (182, 118), (188, 143), (191, 155), (195, 172), (198, 184), (200, 200), (201, 211), (199, 227), (199, 238), (194, 261), (185, 291), (169, 339), (175, 336), (278, 325), (268, 329), (298, 326), (347, 328), (344, 325), (379, 336), (375, 338), (352, 296), (332, 257)]
# trial_6 = [(259, 111), (256, 106), (257, 104), (257, 105), (256, 104), (257, 109), (255, 108), (259, 109), (262, 108), (264, 108), (267, 108), (265, 109), (263, 107), (260, 117), (256, 128), (256, 141), (258, 148), (258, 162), (259, 178), (258, 185), (252, 201), (250, 222), (248, 241), (246, 249), (243, 266), (238, 291), (236, 300), (247, 296), (273, 295), (308, 295), (328, 295), (365, 293), (397, 294), (416, 296), (446, 302), (471, 299), (483, 300), (501, 298), (510, 300), (523, 311), (521, 305), (520, 293), (516, 279), (506, 248), (502, 214), (500, 198), (494, 176), (488, 148), (495, 153), (492, 156), (482, 155), (470, 154), (429, 151), (417, 146), (291, 144), (168, 150), (137, 156), (197, 169), (186, 174), (229, 180)]
# trial_7 = [(258, 113), (259, 116), (258, 114), (259, 113), (262, 117), (273, 125), (285, 136), (292, 142), (300, 150), (306, 156), (315, 166), (326, 179), (336, 189), (355, 205), (377, 222), (388, 230), (407, 254), (418, 265), (429, 286), (436, 296), (449, 319), (468, 339), (469, 344), (455, 337), (448, 335), (424, 332), (401, 331), (366, 329), (347, 332), (311, 329), (273, 329), (255, 335), (217, 338), (219, 338), (237, 332), (247, 326), (282, 304), (325, 282), (316, 293), (343, 276), (377, 257), (375, 258), (391, 244), (407, 227), (416, 223), (438, 203), (449, 193), (463, 174), (469, 168), (468, 170), (410, 230)]
# trial_8 = [(393, 113), (401, 99), (405, 100), (409, 97), (408, 94), (401, 94), (388, 93), (378, 93), (352, 90), (324, 89), (307, 91), (274, 92), (258, 94), (232, 95), (216, 95), (194, 96), (193, 97), (197, 107), (208, 125), (214, 141), (216, 174), (219, 206), (218, 218), (215, 234), (215, 245), (214, 264), (212, 283), (213, 296), (211, 334), (209, 340), (220, 334), (240, 334), (251, 332), (276, 328), (305, 331), (322, 333), (347, 334), (353, 337), (353, 343), (352, 341), (359, 304)]
# trial_9 = [(393, 124), (404, 118), (410, 119), (411, 118), (408, 111), (400, 112), (379, 110), (338, 111), (335, 106), (306, 101), (297, 99), (268, 95), (242, 92), (226, 90), (207, 93), (213, 97), (228, 108), (239, 134), (238, 153), (234, 179), (232, 199), (231, 208), (231, 223), (229, 232), (226, 252), (224, 277), (225, 293), (217, 326), (217, 323), (225, 321), (255, 323), (279, 324), (289, 325), (318, 321), (332, 322), (360, 320), (393, 331), (393, 331), (385, 319), (379, 302)]
# trial_10 = [(399, 122), (381, 102), (371, 126), (367, 129), (363, 125), (371, 129), (378, 131), (362, 123), (350, 120), (333, 116), (315, 117), (301, 111), (294, 112), (274, 112), (257, 112), (247, 113), (223, 110), (209, 112), (200, 116), (204, 121), (210, 131), (214, 144), (215, 165), (219, 188), (221, 199), (224, 221), (221, 244), (219, 257), (214, 278), (212, 287), (213, 301), (212, 326), (211, 335), (208, 347), (211, 349), (222, 346), (248, 385), (309, 349), (327, 347), (368, 345), (393, 349), (386, 343), (336, 293)]
# trial_11 = [(249, 123), (253, 125), (242, 121), (240, 119), (244, 135), (245, 155), (243, 179), (237, 202), (235, 236), (236, 249), (236, 261), (231, 282), (228, 291), (229, 315), (234, 317), (267, 318), (286, 316), (343, 307), (398, 312), (554, 333), (579, 334), (588, 333), (586, 325), (571, 280), (562, 235), (559, 213), (548, 179), (543, 160), (544, 160), (541, 164), (522, 168), (506, 172), (457, 187), (390, 229), (380, 178), (330, 178), (268, 208), (266, 171), (206, 170), (198, 172), (244, 182), (262, 175)]
# trial_12 = [(409, 145), (409, 136), (410, 129), (411, 130), (409, 132), (393, 129), (386, 127), (362, 123), (347, 123), (314, 122), (283, 116), (262, 114), (226, 112), (206, 113), (183, 116), (188, 122), (199, 138), (206, 161), (204, 176), (200, 209), (200, 234), (196, 259), (196, 280), (196, 291), (194, 315), (191, 323), (186, 354), (184, 385), (186, 381), (211, 374), (230, 373), (258, 371), (294, 363), (311, 361), (336, 354), (391, 362), (370, 328)]
# trial_13 = [(272, 139), (264, 131), (255, 124), (258, 126), (258, 128), (260, 142), (259, 151), (255, 177), (255, 213), (256, 230), (251, 262), (248, 286), (242, 334), (238, 345), (241, 337), (252, 334), (285, 332), (322, 330), (345, 332), (375, 328), (405, 329), (433, 328), (445, 328), (478, 335), (499, 339), (526, 350), (528, 351), (529, 349), (527, 320), (524, 305), (518, 271), (513, 240), (511, 220), (506, 191), (504, 178), (505, 184), (498, 190), (488, 190), (442, 190), (362, 223), (302, 177), (268, 177), (202, 180), (187, 184), (195, 186), (224, 179)]
# trial_14 = [(242, 158), (233, 142), (225, 137), (229, 141), (231, 142), (231, 154), (229, 178), (225, 188), (221, 209), (220, 218), (217, 235), (217, 259), (215, 269), (214, 291), (212, 318), (211, 333), (205, 346), (207, 342), (231, 343), (248, 344), (290, 338), (328, 334), (349, 332), (388, 330), (412, 324), (459, 325), (489, 330), (528, 329), (542, 337)]
# trial_15 = [(418, 132), (418, 124), (419, 123), (420, 126), (412, 124), (370, 125), (342, 124), (299, 122), (287, 111), (267, 110), (227, 109), (190, 116), (171, 118), (148, 117), (148, 128), (168, 157), (173, 177), (183, 211), (185, 230), (184, 261), (182, 274), (178, 302), (176, 330), (178, 344), (177, 388), (154, 443), (196, 425), (259, 394), (275, 396), (309, 397), (357, 397), (351, 397), (360, 399), (345, 346), (315, 270), (314, 286)]
# trial_16 = [(253, 128), (255, 131), (243, 119), (240, 120), (243, 125), (245, 135), (242, 157), (237, 178), (240, 192), (246, 222), (251, 240), (254, 266), (250, 294), (247, 311), (238, 346), (237, 349), (252, 353), (287, 369), (318, 352), (313, 358), (360, 354), (389, 357), (424, 359), (456, 350), (469, 352), (500, 350), (525, 354), (566, 350), (569, 363), (563, 356), (550, 321), (546, 290), (543, 276), (536, 245), (531, 228), (520, 186), (518, 169), (518, 176), (503, 177), (469, 173), (451, 173), (401, 171), (320, 211), (319, 168), (271, 163), (219, 165), (193, 170), (130, 179), (137, 186), (197, 187), (220, 165)]
# trial_17 = [(278, 130), (276, 122), (278, 117), (276, 112), (275, 117), (271, 134), (271, 145), (270, 169), (274, 196), (276, 207), (280, 236), (280, 262), (280, 301), (279, 323), (274, 341), (277, 337), (288, 339), (318, 341), (351, 340), (381, 340), (401, 342), (433, 347), (453, 344), (487, 343), (518, 346), (546, 339), (558, 346), (562, 353), (558, 345), (554, 328), (539, 291), (527, 259), (518, 231), (512, 215), (506, 193), (508, 192), (505, 194), (501, 193), (479, 194), (402, 202), (373, 200), (367, 189), (344, 192), (291, 196), (261, 195), (232, 196), (205, 198), (222, 206)]
# trial_18 = [(414, 138), (416, 122), (426, 118), (428, 119), (433, 117), (428, 115), (413, 114), (401, 114), (363, 112), (350, 112), (318, 113), (284, 111), (264, 111), (230, 109), (212, 107), (186, 107), (181, 110), (170, 113), (165, 114), (166, 120), (175, 146), (173, 163), (180, 195), (178, 219), (177, 254), (180, 271), (182, 297), (182, 308), (178, 333), (169, 361), (164, 380), (155, 415), (153, 454), (399, 412), (373, 369), (360, 331), (334, 294)]
# trial_19 = [(448, 175), (447, 168), (443, 157), (443, 156), (445, 158), (432, 154), (418, 154), (378, 153), (356, 154), (317, 152), (289, 153), (272, 147), (238, 146), (208, 147), (194, 141), (199, 147), (200, 157), (206, 179), (215, 213), (217, 228), (217, 258), (220, 271), (220, 301), (221, 317), (215, 347), (213, 382), (208, 404), (161, 472), (189, 450), (229, 436), (248, 438), (279, 437), (301, 436), (325, 427), (380, 438), (404, 440), (390, 432), (354, 380)]
# trial_20 = [(320, 157), (323, 152), (300, 127), (293, 125), (293, 126), (308, 141), (320, 152), (342, 174), (367, 192), (383, 204), (414, 233), (429, 249), (458, 288), (496, 339), (510, 358), (555, 419), (563, 432), (542, 433), (523, 434), (426, 434), (277, 461), (308, 355), (365, 323), (343, 335), (345, 321), (426, 265), (395, 324), (448, 241), (462, 231), (483, 201), (477, 205), (506, 189), (505, 192)]
# trial_21 = [(281, 139), (283, 129), (280, 122), (277, 122), (276, 130), (292, 145), (328, 182), (359, 236), (356, 230), (375, 255), (410, 289), (445, 368), (480, 364), (501, 383), (513, 395), (516, 404), (496, 402), (475, 397), (343, 306), (364, 298), (431, 229), (409, 297), (498, 179), (511, 161), (369, 203)]
# trial_22 = [(232, 156), (225, 148), (225, 150), (225, 155), (224, 162), (224, 175), (223, 178), (227, 171), (241, 166), (255, 163), (286, 186), (272, 160), (265, 162), (252, 166), (250, 172), (247, 191), (247, 217), (245, 228), (247, 249), (246, 262), (251, 292), (252, 320), (250, 334), (239, 370), (239, 379), (250, 377), (281, 391), (319, 367), (359, 362), (389, 366), (423, 378), (454, 380), (483, 384), (521, 387), (541, 389), (577, 400), (605, 422), (602, 419), (597, 412), (598, 412), (588, 376), (585, 375), (573, 338), (576, 336), (575, 324), (574, 297), (571, 282), (572, 253), (575, 237), (573, 244), (552, 246), (524, 246), (508, 242), (466, 235), (405, 234), (324, 276), (275, 248), (274, 228), (195, 229), (179, 232), (199, 235), (241, 215)]
# trial_23 = [(293, 213), (288, 200), (286, 196), (285, 192), (281, 198), (283, 208), (282, 223), (288, 251), (284, 265), (284, 287), (282, 299), (279, 327), (279, 352), (281, 368), (282, 383), (283, 381), (308, 373), (349, 372), (378, 379), (412, 373), (457, 361), (486, 361), (517, 355), (546, 352), (554, 363), (544, 357), (531, 317), (527, 296), (523, 266), (519, 237), (517, 224), (508, 207), (506, 212), (485, 213), (390, 267), (371, 258), (355, 215), (277, 222), (232, 215), (195, 209), (185, 209), (232, 218), (274, 213), (271, 214)]
# trial_24 = [(262, 186), (261, 170), (260, 163), (251, 154), (246, 152), (263, 165), (288, 189), (299, 200), (328, 223), (358, 245), (371, 261), (394, 288), (423, 328), (418, 390), (470, 387), (476, 406), (470, 402), (437, 390), (404, 386), (187, 392), (195, 390), (265, 345), (315, 309), (277, 329), (321, 328), (370, 266), (324, 337), (353, 309), (417, 218), (429, 202), (437, 189), (426, 192), (409, 197)]
# trial_25 = [(293, 174), (288, 170), (277, 156), (274, 153), (275, 149), (282, 155), (289, 160), (309, 178), (321, 186), (347, 207), (369, 225), (377, 234), (395, 250), (405, 261), (422, 281), (449, 315), (475, 337), (506, 377), (506, 383), (488, 382), (476, 380), (450, 385), (332, 385), (310, 385), (160, 421), (169, 378), (229, 331), (185, 360), (309, 289), (351, 266), (342, 277), (374, 254), (403, 237), (401, 239), (421, 251), (445, 201), (431, 240), (456, 178), (460, 180), (434, 192)]
# trial_26 = [(446, 166), (444, 143), (441, 141), (440, 140), (416, 136), (402, 134), (381, 141), (365, 139), (331, 137), (294, 137), (273, 135), (228, 131), (176, 127), (158, 130), (158, 143), (169, 169), (172, 189), (172, 245), (172, 240), (171, 278), (171, 296), (174, 334), (175, 353), (173, 379), (173, 406), (169, 419), (407, 445)]
# trial_27 = [(322, 188), (314, 159), (305, 155), (306, 158), (313, 163), (307, 153)]
# trial_28 = [(294, 172), (283, 155), (281, 153), (284, 154), (288, 160), (309, 180), (329, 200), (339, 208), (363, 229), (378, 244), (412, 274), (436, 304), (451, 320), (487, 358), (530, 424), (531, 417), (525, 426), (501, 427), (477, 427), (228, 378), (279, 333), (254, 376), (275, 388), (333, 299), (343, 343), (413, 244), (427, 227), (455, 196), (444, 205), (461, 175), (478, 164)]
# trial_29 = [(323, 185), (319, 162), (318, 157), (318, 151), (321, 153), (338, 170), (360, 194), (372, 207), (395, 231), (429, 263), (443, 277), (484, 320), (520, 363), (535, 382), (554, 412), (558, 420), (545, 411), (526, 412), (509, 413), (466, 411), (436, 411), (302, 332), (337, 295), (324, 317), (343, 313), (416, 224), (383, 283), (432, 206), (393, 272), (418, 242), (471, 171), (441, 217), (473, 176)]
# trial_30 = [(353, 188), (347, 173), (335, 155), (335, 153), (338, 155), (352, 171), (371, 191), (377, 205), (393, 231), (406, 246), (422, 267), (443, 298), (453, 316), (490, 349), (502, 362), (526, 393), (557, 433), (282, 368), (341, 318), (303, 363), (353, 357), (401, 271), (349, 361), (428, 248), (451, 213), (446, 221), (462, 180), (471, 179), (459, 184)]


# USER D

# trial_1 = [(532, 208), (531, 217), (518, 217), (492, 218), (449, 222), (425, 223), (404, 226), (385, 227), (362, 230), (349, 232), (351, 241), (355, 263), (361, 297), (363, 320), (363, 345), (364, 365), (362, 378), (402, 371), (435, 367), (480, 362), (508, 360), (529, 363), (531, 365), (530, 370), (530, 363), (550, 319)]
#
# trial_2 = [(321, 206), (322, 210), (323, 211), (321, 215), (319, 228), (319, 297), (321, 317), (320, 335), (317, 356), (316, 363), (319, 365), (322, 365), (333, 358), (364, 358), (413, 355), (436, 353), (459, 352), (497, 353), (510, 361), (509, 359), (510, 352), (514, 331), (504, 277), (496, 259), (496, 247), (497, 236), (495, 235), (482, 236), (427, 242), (402, 245), (381, 252), (363, 256), (360, 256), (361, 256), (366, 250), (378, 223)]
#
# trial_3 = [(305, 217), (304, 218), (304, 221), (307, 221), (306, 246), (300, 299), (297, 325), (294, 344), (363, 358), (407, 359), (461, 355), (484, 355), (501, 352), (510, 354), (509, 342), (506, 309), (502, 282), (497, 255), (491, 238), (493, 222), (485, 226), (445, 229), (415, 234), (385, 236), (361, 239), (335, 239), (334, 241), (341, 217)]
#
# trial_4 = [(309, 190), (311, 194), (310, 196), (308, 198), (310, 206), (308, 255), (307, 282), (307, 318), (306, 354), (309, 357), (357, 347), (394, 345), (438, 340), (461, 345), (485, 346), (500, 346), (504, 344), (500, 314), (495, 292), (482, 252), (478, 233), (480, 220), (464, 213), (441, 219), (402, 220), (383, 219), (359, 224), (332, 229), (332, 228), (340, 212), (354, 179)]
#
# trial_5 = [(505, 168), (461, 136), (421, 124), (388, 124), (356, 135), (344, 149), (339, 159), (334, 172), (333, 177), (333, 179), (346, 193), (362, 212), (381, 237), (404, 256), (446, 297), (460, 322), (480, 342), (474, 342), (453, 346), (394, 344), (362, 343), (332, 339), (326, 342), (306, 340), (275, 337), (276, 337), (315, 310), (354, 280), (385, 262), (409, 238), (432, 220), (467, 195), (470, 195), (481, 175), (507, 146)]
#
# trial_6 = [(291, 195), (292, 201), (295, 219), (297, 241), (297, 267), (308, 322), (419, 314), (470, 318), (492, 315), (518, 316), (522, 315), (520, 317), (519, 301), (514, 264), (508, 244), (501, 224), (499, 208), (497, 210), (470, 206), (439, 212), (404, 217), (372, 223), (345, 226), (310, 226), (308, 227), (310, 222), (318, 195)]
#
# trial_7 = [(311, 275), (537, 335), (577, 336), (576, 342), (553, 294), (542, 255), (530, 221), (519, 195), (517, 187), (512, 202), (483, 201), (443, 205), (387, 212), (356, 219), (339, 219), (341, 219), (345, 216), (361, 161)]
#
# trial_8 = [(290, 289), (449, 333), (488, 336), (542, 345), (537, 345), (538, 342), (536, 347), (529, 317), (524, 293), (517, 260), (508, 235), (500, 231), (504, 221), (489, 222), (441, 219), (410, 222), (381, 227), (327, 230), (310, 237), (311, 236), (313, 233), (314, 201), (327, 165)]
#
# trial_9 = [(381, 254), (400, 287), (424, 307), (446, 336), (441, 357), (330, 336), (289, 332), (256, 334), (257, 332), (263, 329), (319, 278), (316, 282), (346, 256), (391, 219), (413, 204), (431, 188), (436, 187), (436, 190), (436, 180), (466, 141)]
#
# trial_10 = [(346, 198), (349, 199), (348, 198), (351, 212), (348, 241), (347, 270), (350, 295), (522, 325), (520, 328), (548, 325), (576, 330), (575, 328), (568, 316), (555, 290), (538, 238), (533, 228), (525, 226), (531, 216), (527, 219), (507, 215), (476, 211), (412, 218), (415, 216), (385, 223), (360, 229), (357, 230), (359, 231), (360, 230), (368, 207), (376, 178)]
#
# trial_11 = [(306, 204), (306, 205), (307, 206), (307, 259), (495, 353), (520, 359), (508, 295), (506, 287), (501, 250), (491, 208), (490, 210), (487, 209), (488, 220), (473, 218), (418, 219), (378, 224), (349, 232), (332, 236), (325, 233), (327, 233), (344, 177)]
#
# trial_12 = [(287, 214), (289, 231), (285, 272), (284, 309), (417, 331), (455, 324), (498, 330), (500, 327), (502, 314), (494, 270), (487, 239), (482, 218), (477, 201), (480, 195), (455, 200), (410, 207), (376, 208), (348, 208), (330, 214), (326, 216), (325, 216), (337, 176), (355, 154)]
#
# trial_13 = [(378, 227), (341, 227), (320, 231), (305, 234), (300, 235), (301, 241), (304, 262), (301, 303), (298, 326), (293, 341), (337, 344), (427, 336), (482, 336), (488, 339), (483, 340), (485, 336)]
#
# trial_14 = [(323, 202), (326, 204), (325, 209), (327, 223), (327, 273), (449, 322), (484, 321), (487, 322), (515, 318), (517, 326), (546, 327), (542, 330), (528, 257), (517, 251), (508, 218), (501, 203), (497, 202), (489, 207), (455, 203), (424, 210), (373, 216), (342, 216), (322, 223), (317, 222), (324, 222), (330, 183)]
#
# trial_15 = [(320, 193), (319, 194), (318, 195), (319, 197), (328, 207), (359, 255), (381, 280), (442, 346), (442, 346), (426, 343), (335, 330), (337, 326), (306, 323), (275, 318), (268, 317), (335, 270), (369, 244), (431, 198), (461, 169), (481, 161), (484, 166), (499, 132), (517, 104)]
#
# trial_16 = [(351, 190), (352, 191), (353, 193), (357, 198), (367, 213), (384, 242), (424, 294), (438, 312), (454, 332), (483, 370), (470, 367), (447, 361), (420, 359), (273, 356), (326, 309), (363, 280), (431, 226), (430, 223), (451, 203), (469, 194), (472, 197), (477, 178), (493, 150)]
#
# trial_17 = [(503, 141), (499, 148), (502, 152), (502, 154), (491, 157), (467, 158), (408, 169), (377, 165), (347, 168), (311, 173), (300, 173), (302, 175), (308, 187), (308, 213), (309, 241), (303, 285), (300, 310), (300, 318), (302, 314), (329, 309), (371, 305), (418, 302), (462, 298), (526, 292), (529, 291), (530, 303), (529, 302), (546, 277)]
#
# trial_18 = [(517, 189), (514, 204), (516, 207), (512, 207), (495, 200), (463, 207), (396, 212), (404, 209), (373, 214), (346, 216), (315, 214), (309, 215), (311, 215), (312, 217), (312, 225), (317, 274), (318, 304), (421, 335), (419, 339), (462, 338), (526, 339), (529, 343), (552, 347), (556, 350), (556, 347), (572, 305)]
#
# trial_19 = [(481, 283), (481, 222), (467, 169)]
#
# trial_20 = [(376, 220), (376, 221), (374, 221), (377, 228), (387, 240), (406, 263), (452, 319), (475, 344), (495, 363), (512, 376), (508, 380), (496, 380), (469, 380), (326, 364), (305, 367), (322, 358), (348, 341), (384, 311), (422, 278), (488, 231), (506, 216), (527, 209), (528, 210), (526, 209), (522, 202)]
#
# trial_21 = [(467, 226), (469, 223), (469, 226), (466, 227), (453, 229), (403, 234), (369, 239), (340, 237), (314, 241), (310, 241), (311, 242), (311, 250), (307, 302), (307, 323), (299, 354), (295, 362), (302, 359), (324, 351), (408, 346), (408, 349), (464, 340), (485, 353), (495, 356), (491, 352)]
#
# trial_22 = [(357, 188), (358, 190), (359, 193), (366, 202), (378, 230), (400, 253), (453, 306), (501, 368), (483, 375), (339, 362), (275, 369), (380, 271), (375, 272), (433, 233), (464, 212), (488, 196), (496, 201), (498, 189), (528, 157)]
#
# trial_23 = [(454, 224), (458, 226), (455, 228), (440, 231), (418, 233), (390, 237), (357, 237), (302, 241), (304, 240), (285, 240), (281, 239), (279, 242), (283, 249), (283, 270), (277, 302), (278, 335), (502, 395), (510, 386), (536, 361)]
#
# trial_24 = [(483, 253), (487, 254), (486, 256), (483, 258), (475, 258), (427, 268), (393, 272), (354, 270), (329, 271), (313, 274), (305, 276), (307, 287), (306, 312), (503, 401), (542, 402), (539, 392), (551, 376)]
#
# trial_25 = [(502, 276), (504, 294), (502, 286), (507, 297), (496, 289), (479, 298), (363, 297), (333, 293), (336, 294), (337, 306), (562, 405), (622, 358), (621, 362), (611, 371), (616, 365), (616, 367), (617, 370), (620, 371), (621, 372), (618, 375), (616, 376), (622, 391), (658, 385), (621, 389), (403, 378)]
#
# trial_26 = [(310, 259), (309, 260), (308, 261), (310, 262), (313, 266), (325, 274), (347, 294), (320, 369), (393, 317), (390, 316), (424, 285), (450, 262), (454, 266), (455, 268), (471, 235)]
#
# trial_27 = [(414, 238), (417, 242), (420, 246), (416, 243), (417, 243), (386, 254), (356, 257), (324, 261), (326, 259), (289, 254), (276, 254), (268, 251), (268, 255), (266, 255), (266, 254), (266, 275), (264, 304), (267, 369), (421, 399), (453, 403), (476, 407), (478, 409), (481, 405)]
#
# trial_28 = [(314, 262), (315, 265), (315, 269), (315, 268), (317, 269), (323, 274), (343, 310), (363, 339), (313, 368), (354, 336), (424, 291), (425, 284), (459, 266), (476, 262), (481, 256), (479, 256), (485, 233), (504, 210)]
#
# trial_29 = [(301, 386), (283, 388), (288, 387), (292, 383), (295, 385), (295, 385), (295, 385), (295, 384), (295, 385), (296, 385), (297, 383), (303, 387), (327, 402), (339, 431), (377, 393), (398, 410), (376, 409), (352, 406), (324, 394), (288, 391), (258, 393), (341, 406), (255, 395), (270, 411), (397, 334), (437, 303), (468, 281), (486, 283), (482, 267)]
#
# trial_30 = [(318, 230), (320, 233), (327, 238), (335, 258), (360, 298), (379, 327), (402, 361), (431, 396), (373, 388), (335, 381), (240, 377), (209, 379), (207, 381), (362, 283), (428, 245), (459, 235), (466, 233)]


#trials = [trial_1, trial_2, trial_3, trial_4, trial_5, trial_6, trial_7, trial_8, trial_9, trial_10, trial_11, trial_12, trial_13, trial_14, trial_15, trial_16, trial_17, trial_18, trial_19, trial_20, trial_21, trial_22, trial_23, trial_24, trial_25, trial_26, trial_27, trial_28, trial_29, trial_30]
#trials = [trial_1, trial_2, trial_3, trial_4, trial_5, trial_6, trial_7, trial_8, trial_9, trial_10, trial_11, trial_12, trial_13, trial_14, trial_15, trial_16, trial_17, trial_18, trial_19, trial_20, trial_21, trial_22, trial_23, trial_24, trial_25, trial_26, trial_27, trial_28, trial_29]
rectangle_trial = [trial_5, trial_6, trial_7, trial_8, trial_10, trial_16, trial_18, trial_21, trial_23, trial_29]
left_square_bracket_trial = [trial_2, trial_3, trial_4, trial_11, trial_12, trial_13, trial_15, trial_17, trial_27]
delete_trial = [trial_1, trial_9, trial_14, trial_19, trial_20, trial_22, trial_24, trial_25, trial_26, trial_28]

#too_fast_trial = [(394, 140), (388, 138), (388, 139), (375, 139), (371, 150), (371, 150), (365, 182), (369, 192), (368, 231), (371, 258), (364, 294), (365, 298), (329, 309), (130, 318), (122, 211), (135, 198), (134, 195), (156, 176), (183, 166), (199, 165), (198, 164), (245, 167), (273, 172), (326, 163), (327, 159), (365, 160), (366, 154), (375, 176), (347, 141), (339, 144), (332, 147), (334, 148), (320, 161), (309, 172)]

def showDrawnGesture(gesture_path):

    enter_pressed = False

    if (len(gesture_path) > 0):
        #cam = cv.VideoCapture(0)

        #while (cam.isOpened()):
            #success, frame = cam.read()

            #if not success:
                #print("Camera not available")
                #continue

        image = cv.imread("black.jpg", cv.IMREAD_COLOR)

        for p in gesture_path:

            cv.circle(image, p, 10, (255, 255, 255, 255), -1)

            if cv.waitKey(20) & 0xff == ord('q'):
                break

        while (not enter_pressed):
            cv.imshow("Show Gesture", image)

            key = cv.waitKey(20) & 0xFF
            if key == 13:
                enter_pressed = True

        print("Enter pressed")
        return

        #cam.release()


def createBoundingBox(points):

    left = 1000
    right = -1000
    top = 1000
    bottom = -1000


    for p in points:

        if p[0] < left:
            left = p[0]

        if p[0] > right:
            right = p[0]

        if p[1] < top:
            top = p[1]

        if p[1] > bottom:
            bottom = p[1]

    return (left, top, right, bottom)

#Uses the distance function to calculate the distance between two points
def calc_distance(prev_point, curr_point):


    return math.sqrt(pow(abs(curr_point[0] - prev_point[0]),2) + pow(abs(curr_point[1] - prev_point[1]),2))

def distance_between_gestures(p1, p2):

    sum = 0
    min = 1000

    if (len(p1) < min):
        min = len(p1)

    if (len(p2) < min):
        min = len(p2)

    for i in range(min - 1):
        sum += calc_distance(p1[i], p2[i])

    return sum

def calculateOverallLength(points):

    length = 0.0

    for i in range(1, len(points)):
        length += calc_distance(points[i - 1], points[i])


    return length

#Resamples points
def resample(points):

    total_length = calculateOverallLength(points)
    threshold = total_length / 149

    resampled_points = [points[0]]
    current_path_length = 0.0

    for i in range(1, len(points)):
        prevPoint = points[i - 1]
        currPoint = points[i]
        distance = calc_distance(prevPoint, currPoint)

        while (current_path_length + distance) >= threshold:

            ratio = (threshold - current_path_length) / distance
            newX = prevPoint[0] + ratio * (currPoint[0] - prevPoint[0])
            newY = prevPoint[1] + ratio * (currPoint[1] - prevPoint[1])

            resampled_points.append((newX, newY))

            prevPoint = (newX, newY)
            distance -= (threshold - current_path_length)
            current_path_length = 0.0

        current_path_length += distance

    if len(resampled_points) < 150:
        resampled_points.append(points[-1])


    return resampled_points


#Moves points to the leftmost/topmost positions possible
def translate(points):

    left = 1000
    top = 1000
    translated_points = []

    for p in points:

        if (p[0] < left):
            left = p[0]
            leftMost = p

        if (p[1] < top):
            top = p[1]
            topMost = p


    for p in points:

        newPoint = (p[0] - leftMost[0], p[1] - topMost[1])
        translated_points.append(newPoint)


    return translated_points

#Uses the bounding box of the list points to scale the gesture downwards
def scale(points):

    left = createBoundingBox(points)[0]
    top = createBoundingBox(points)[1]
    right = createBoundingBox(points)[2]
    bottom = createBoundingBox(points)[3]

    scaledPoints = []

    if (right - left == 0):
        print(right)
        print(left)

    scaleX = 200 / (right - left)
    scaleY = 200 / (bottom - top)

    for p in points:
        scaledX = int(p[0] * scaleX)
        scaledY = int(p[1] * scaleY)
        newPoint = (scaledX, scaledY)

        scaledPoints.append(newPoint)

    return scaledPoints


def normalize(gesture):

    resampled = resample(gesture)
    translated = translate(resampled)
    scaled = scale(translated)

    return scaled

def compare(normalized_1, normalized_2):

    sum = 0
    min = 1000

    if (len(normalized_1) < min):
        min = len(normalized_1)

    if (len(normalized_2) < min):
        min = len(normalized_2)

    for i in range(min-1):

        sum += calc_distance(normalized_1[i], normalized_2[i])

    return sum

def findVariance(rectangle_trial):

    counter = 0
    total_sum = 0

    for trial in rectangle_trial:
        for k in range(len(rectangle_trial)):
            if trial != rectangle_trial[k]:
                normalized_1 = normalize(trial)
                normalized_2 = normalize(rectangle_trial[k])
                total_sum += compare(normalized_1, normalized_2)
                counter += 1

    print(counter)
    print(total_sum / counter)


def Deg2Rad(d):
    return (d * math.pi) / 180.0

def Centroid(points):

    x = 0.0
    y = 0.0
    for i in range(len(points)):
        x += points[i][0]
        y += points[i][1]

    x /= len(points)
    y /= len(points)
    return (x, y)

def confidence(d, D):
    return max(0, 1 - (d / D))

def RotateBy(points, radians):

    c = Centroid(points)
    cos = math.cos(radians)
    sin = math.sin(radians)
    newpoints = []
    for i in range(len(points)):
        qx = (points[i][0] - c[0]) * cos - (points[i][1] - c[1]) * sin + c[0]
        qy = (points[i][0] - c[0]) * sin + (points[i][1] - c[1]) * cos + c[1]
        newpoints.append((qx, qy))
    return newpoints


def DistanceAtBestAngle(p1, p2, a, b, threshold):

    x1 = Phi * a + (1.0 - Phi) * b
    f1 = DistanceAtAngle(p1, p2, x1)
    x2 = (1.0 - Phi) * a + Phi * b
    f2 = DistanceAtAngle(p1, p2, x2)

    while (abs(b - a) > threshold):

        if (f1 < f2):
            b = x2
            x2 = x1
            f2 = f1
            x1 = Phi * a + (1.0 - Phi) * b
            f1 = DistanceAtAngle(p1, p2, x1)
        else:
            a = x1
            x1 = x2
            f1 = f2
            x2 = (1.0 - Phi) * a + Phi * b
            f2 = DistanceAtAngle(p1, p2, x2)

    return min(f1, f2)

def DistanceAtAngle(p1, p2, x1):

    newPoints = RotateBy(p1, x1)
    return PathDistance(newPoints, p2)


def PathDistance(p1, p2):

    d = 0.0
    min_length = min(len(p1), len(p2))
    for i in range(min_length):
        d += Distance(p1[i], p2[i])
    return d / max(len(p1), len(p2))


def Distance(p1, p2):

    dx = p2[0] - p1[0]
    dy = p2[1] - p1[1]
    return math.sqrt(dx * dx + dy * dy)

def bounding_box_dist(points):

    min_x = min(p[0] for p in points)
    max_x = max(p[0] for p in points)
    min_y = min(p[1] for p in points)
    max_y = max(p[1] for p in points)

    return math.sqrt((max_x - min_x) ** 2 + (max_y - min_y) ** 2)

AngleRange = Deg2Rad(45.0)
AnglePrecision = Deg2Rad(2.0)


def calc_confidence1(points):
    results = {}
    normalized_trial = normalize(points)

    for template in original_gestures:
        points = template['points']
        template_name = template['name']
        normalized_template = normalize(points)

        # d = distance_between_gestures(normalized_template, normalized_trial)
        d = DistanceAtBestAngle(normalized_template, normalized_trial, -AngleRange, AngleRange, AnglePrecision)
        D = bounding_box_dist(normalized_trial)
        c = confidence(d, D)
        results[template_name] = c

    # print("#####################################################################")
    # print("Results for trial " + str(trial_no + 1))
    print(results)
    max_score = max(results.values())
    name = [key for key, val in results.items() if val == max_score]
    print("Highest confidence - " + str(name[0]) + " with confidence " + str(max_score))
    # print("#####################################################################")

def calc_confidence(points, match_name):
    results = {}
    normalized_trial = normalize(points)

    for template in original_gestures:
        points = template['points']
        template_name = template['name']
        normalized_template = normalize(points)

        # d = distance_between_gestures(normalized_template, normalized_trial)
        d = DistanceAtBestAngle(normalized_template, normalized_trial, -AngleRange, AngleRange, AnglePrecision)
        D = bounding_box_dist(normalized_trial)
        c = confidence(d, D)
        results[template_name] = c

    # print("#####################################################################")
    # print("Results for trial " + str(trial_no + 1))
    # print(results)
    max_score = max(results.values())
    name = [key for key, val in results.items() if val == max_score]
    # print("Highest confidence - " + str(name[0]) + " with confidence " + str(max_score))
    return results[match_name]
    # print("#####################################################################")




# print(trials[0])
# showDrawnGesture(x_points['points'])

# i = 1
# for trial in trials:
#     print(i)
#     calc_confidence1(trial)
#     i += 1

# showDrawnGesture(trial_27)

# calc_confidence1([(211, 302), (214, 299), (220, 300), (221, 301), (232, 299), (241, 296), (240, 298), (259, 290), (272, 278), (286, 260), (294, 253), (294, 252), (311, 233), (329, 217), (336, 209), (338, 191), (339, 190), (326, 174), (317, 171), (298, 170), (295, 168), (280, 175), (269, 186), (271, 194), (270, 192), (287, 208), (309, 222), (322, 232), (345, 248), (345, 247), (363, 260), (385, 268), (399, 269), (418, 273), (419, 272), (425, 276), (424, 282), (418, 283), (418, 282), (389, 260)]
# )

# showDrawnGesture(trial_26)

findVariance(rectangle_trial)
